    <!DOCTYPE html>
    <html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>FinTrack Dashboard</title>
        <style>
            * {
                box-sizing: border-box;
            }
            body {
                font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
                margin: 0;
                padding: 0;
                background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
                color: #fff;
                overflow-x: hidden;
                min-height: 100vh;
            }
            .sidebar {
                width: 200px;
                background: linear-gradient(145deg, #34495e 0%, #2c3e50 100%);
                padding: 20px;
                position: fixed;
                height: 100%;
                border-radius: 0;
                box-shadow: 0 6px 12px rgba(0,0,0,0.3);
                transition: transform 0.4s ease;
                z-index: 1000;
                left: 0;
                top: 0;
            }
            .sidebar ul {
                list-style: none;
                padding: 0;
                display: flex;
                flex-direction: column;
                gap: 10px;
            }
            .sidebar ul li {
                color: #ecf0f1;
                cursor: pointer;
                font-size: 1.1em;
                padding: 10px;
                border-radius: 5px;
                transition: all 0.3s ease;
                text-align: center;
            }
            .sidebar ul li button {
                background: linear-gradient(135deg, #4CAF50, #2E8B57);
                border: none;
                color: white;
                padding: 10px 20px;
                border-radius: 8px;
                cursor: pointer;
                font-size: 16px;
                width: 100%;
                transition: 0.3s;
            }
            .sidebar ul li button:hover {
                background: linear-gradient(135deg, #45a049, #3e8e41);
            }
            .sidebar ul li a {
                text-decoration: none;
            }
            .content {
                margin-left: 240px;
                padding: 20px;
                animation: fadeIn 1.2s ease-in-out;
            }
            @keyframes fadeIn {
                from { opacity: 0; transform: translateY(20px); }
                to { opacity: 1; transform: translateY(0); }
            }
            .dashboard-header {
                display: flex;
                justify-content: space-between;
                align-items: center;
                background: linear-gradient(90deg, #3498db 0%, #8e44ad 100%);
                padding: 20px;
                border-radius: 15px;
                box-shadow: 0 6px 15px rgba(0,0,0,0.2);
                margin-bottom: 20px;
                animation: pulse 2s infinite;
            }
            @keyframes pulse {
                0% { transform: scale(1); }
                50% { transform: scale(1.02); }
                100% { transform: scale(1); }
            }
            .dashboard-header h2 {
                font-size: 2em;
                color: #fff;
                text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
            }
            .financial-indicators {
                display: grid;
                grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
                gap: 20px;
                margin-bottom: 20px;
            }
            .indicator {
                text-align: center;
                padding: 20px;
                background: linear-gradient(135deg, #ffffff 0%, #f0f0f0 100%);
                border-radius: 15px;
                box-shadow: 0 6px 12px rgba(0,0,0,0.1);
                flex: 1;
                transition: all 0.4s ease;
                border: 2px solid #3498db;
            }
            .indicator:hover {
                transform: scale(1.1) rotate(2deg);
                box-shadow: 0 8px 16px rgba(52,152,219,0.4);
            }
            .indicator h3 {
                font-size: 1.5em;
                color: #2c3e50;
                font-weight: bold;
                text-transform: uppercase;
                letter-spacing: 1px;
            }
            .indicator p {
                font-size: 1.8em;
                color: #e74c3c;
                margin: 10px 0;
                animation: bounce 1.5s infinite;
            }
            @keyframes bounce {
                0%, 20%, 50%, 80%, 100% { transform: translateY(0); }
                40% { transform: translateY(-10px); }
                60% { transform: translateY(-5px); }
            }
            .chart-section {
                display: grid;
                grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
                gap: 20px;
                margin-top: 20px;
            }
            .chart, .trend-chart {
                background: linear-gradient(135deg, #ffffff 0%, #ecf0f1 100%);
                padding: 20px;
                border-radius: 15px;
                box-shadow: 0 6px 12px rgba(0,0,0,0.1);
                flex: 1;
                animation: slideUp 1.2s ease-out;
            }
            @keyframes slideUp {
                from { transform: translateY(30px); opacity: 0; }
                to { transform: translateY(0); opacity: 1; }
            }
            .chart h3, .trend-chart h3, .transactions h3 {
                font-size: 1.6em;
                color: #2c3e50;
                font-weight: bold;
                text-shadow: 1px 1px 3px rgba(0,0,0,0.2);
                border-bottom: 2px solid #3498db;
                padding-bottom: 5px;
            }
            .new-transaction {
                background: linear-gradient(90deg, #27ae60 0%, #2ecc71 100%);
                color: white;
                padding: 12px 25px;
                border: none;
                border-radius: 10px;
                cursor: pointer;
                font-size: 1.1em;
                transition: all 0.4s ease;
                box-shadow: 0 4px 8px rgba(0,0,0,0.2);
            }
            .new-transaction:hover {
                background: linear-gradient(90deg, #219653 0%, #27ae60 100%);
                transform: translateY(-3px);
                box-shadow: 0 6px 12px rgba(33,150,83,0.4);
            }
            canvas {
                animation: rotateIn 1.5s ease-in-out;
            }
            @keyframes rotateIn {
                from { transform: rotate(-15deg); opacity: 0; }
                to { transform: rotate(0); opacity: 1; }
            }
            .transaction-table {
                width: 100%;
                border-collapse: collapse;
                margin-top: 10px;
            }
            .transaction-table th, .transaction-table td {
                padding: 12px;
                text-align: left;
                border-bottom: 2px solid #ddd;
                transition: background 0.3s ease;
            }
            .transaction-table th {
                background: linear-gradient(90deg, #3498db 0%, #8e44ad 100%);
                color: #fff;
                font-size: 1.2em;
                text-transform: uppercase;
            }
            .transaction-table tr:hover td {
                background: #f0f0f0;
                color: #2c3e50;
            }
            .popup {
                display: none;
                position: fixed;
                top: 50%;
                left: 50%;
                transform: translate(-50%, -50%);
                background: #fff;
                padding: 20px;
                border-radius: 10px;
                box-shadow: 0 6px 12px rgba(0,0,0,0.3);
                z-index: 1000;
                width: 300px;
                color: #333;
            }
            .popup h3 {
                font-size: 1.2em;
                margin-bottom: 15px;
            }
            .popup label {
                display: block;
                margin-bottom: 5px;
                font-weight: bold;
            }
            .popup input, .popup select {
                width: 100%;
                padding: 8px;
                margin-bottom: 10px;
                border: 1px solid #ddd;
                border-radius: 5px;
            }
            .popup button {
                background: #27ae60;
                color: #fff;
                padding: 10px 20px;
                border: none;
                border-radius: 5px;
                cursor: pointer;
                transition: background 0.3s ease;
            }
            .popup button:hover {
                background: #219653;
            }
            .popup .error {
                color: #e74c3c;
                font-size: 0.9em;
                display: none;
                margin-top: -10px;
                margin-bottom: 10px;
            }
            .overlay {
                display: none;
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background: rgba(0,0,0,0.5);
                z-index: 999;
            }
            .menu-toggle {
                display: none;
                position: fixed;
                top: 15px;
                left: 15px;
                z-index: 1001;
                background: linear-gradient(135deg, #4CAF50, #2E8B57);
                border: none;
                color: white;
                padding: 10px 15px;
                border-radius: 8px;
                cursor: pointer;
                font-size: 18px;
                box-shadow: 0 4px 8px rgba(0,0,0,0.3);
            }
                
            /* Tablet Portrait (481px - 768px) */
            @media (max-width: 768px) and (min-width: 481px) {
                .content {
                    margin-left: 0;
                    padding: 15px;
                    padding-top: 70px;
                }
                .sidebar {
                    transform: translateX(-100%);
                    border-radius: 0 15px 15px 0;
                }
                .sidebar.active {
                    transform: translateX(0);
                }
                .menu-toggle {
                    display: block;
                }
                .dashboard-header {
                    flex-direction: column;
                    gap: 15px;
                    padding: 15px;
                }
                .dashboard-header h2 {
                    font-size: 1.6em;
                }
                .financial-indicators {
                    grid-template-columns: repeat(2, 1fr);
                    gap: 15px;
                }
                .indicator h3 {
                    font-size: 1.2em;
                }
                .indicator p {
                    font-size: 1.5em;
                }
                .chart-section {
                    grid-template-columns: 1fr;
                }
                .transaction-table th,
                .transaction-table td {
                    padding: 10px;
                    font-size: 0.9em;
                }
            }
                
            /* Mobile (320px - 480px) */
            @media (max-width: 480px) {
                .content {
                    margin-left: 0;
                    padding: 10px;
                    padding-top: 60px;
                }
                .sidebar {
                    transform: translateX(-100%);
                    width: 80%;
                    max-width: 250px;
                    border-radius: 0 15px 15px 0;
                }
                .sidebar.active {
                    transform: translateX(0);
                }
                .sidebar ul {
                    gap: 8px;
                }
                .sidebar ul li button {
                    padding: 8px 15px;
                    font-size: 14px;
                }
                .menu-toggle {
                    display: block;
                    padding: 8px 12px;
                    font-size: 16px;
                }
                .dashboard-header {
                    flex-direction: column;
                    gap: 12px;
                    padding: 12px;
                    margin-bottom: 15px;
                }
                .dashboard-header h2 {
                    font-size: 1.4em;
                }
                .new-transaction {
                    padding: 10px 20px;
                    font-size: 1em;
                    width: 100%;
                }
                .financial-indicators {
                    grid-template-columns: 1fr;
                    gap: 12px;
                }
                .indicator {
                    padding: 15px;
                }
                .indicator h3 {
                    font-size: 1em;
                }
                .indicator p {
                    font-size: 1.4em;
                }
                .chart-section {
                    grid-template-columns: 1fr;
                    gap: 15px;
                }
                .chart, .trend-chart, .transactions {
                    padding: 15px;
                }
                .chart h3, .trend-chart h3, .transactions h3 {
                    font-size: 1.2em;
                }
                .transaction-table {
                    font-size: 0.85em;
                }
                .transaction-table th,
                .transaction-table td {
                    padding: 8px 6px;
                }
                .popup {
                    width: 90%;
                    max-width: 320px;
                    padding: 15px;
                }
                .popup h3 {
                    font-size: 1.1em;
                }
                .popup input,
                .popup select {
                    padding: 10px;
                    font-size: 14px;
                }
                .popup button {
                    width: 100%;
                    padding: 12px;
                }
            }
                
            /* Extra Small Mobile (max 375px) */
            @media (max-width: 375px) {
                .content {
                    padding: 8px;
                }
                .dashboard-header h2 {
                    font-size: 1.3em;
                }
                .indicator h3 {
                    font-size: 0.9em;
                }
                .indicator p {
                    font-size: 1.2em;
                }
                .chart h3, .trend-chart h3, .transactions h3 {
                    font-size: 1.1em;
                }
                .transaction-table {
                    font-size: 0.8em;
                }
            }
        </style>
    </head>
    <body>
        <button class="menu-toggle" onclick="toggleSidebar()">â˜° Menu</button>
        <div class="sidebar" id="sidebar">
            <ul>
                <li><button onclick="window.location.href='dashboard.html'">Dashboard</button></li>
                <li><a href="budgets.html"><button>Budgets</button></a></li>
                <li><a href="transactions.html"><button>Transactions</button></a></li>
                <li><a href="reports.html"><button>Reports</button></a></li>
            </ul>
        </div>
        <div class="content">
            <div class="dashboard-header">
                <h2>Dashboard</h2>
                <button class="new-transaction" onclick="openPopup()">New Transaction</button>
            </div>
            <div class="financial-indicators">
                <div class="indicator">
                    <h3>Total Income</h3>
                    <p id="totalIncome">$0.00</p>
                    <small>This month</small>
                </div>
                <div class="indicator">
                    <h3>Total Expenses</h3>
                    <p id="totalExpenses">$0.00</p>
                    <small>This month</small>
                </div>
                <div class="indicator">
                    <h3>Savings</h3>
                    <p id="savings">$0.00</p>
                    <small>Remaining balance</small>
                </div>
            </div>
            <div class="chart-section">
                <div class="chart">
                    <h3>Spending by Category</h3>
                    <p>This month's expenses</p>
                    <canvas id="donutChart"></canvas>
                    <small>Track your spending to stay on budget</small>
                </div>
                <div class="trend-chart">
                    <h3>5-Month Trend</h3>
                    <p>Financial overview</p>
                    <canvas id="trendChart"></canvas>
                </div>
                <div class="transactions">
                    <h3>Recent Transactions</h3>
                    <p>Your last 5 transactions</p>
                    <table class="transaction-table" id="transactionTable">
                        <tr>
                            <th>Description</th>
                            <th>Category</th>
                            <th>Amount</th>
                        </tr>
                    </table>
                </div>
            </div>
        </div>
        <div class="overlay" id="overlay" onclick="closePopup()"></div>
        <div class="popup" id="popup">
            <h3>Add Transaction</h3>
            <p>Add a new income or expense entry, then save when you're done.</p>
            <label>Transaction Type:</label>
            <select id="transactionType">
                <option value="Expense">Expense</option>
                <option value="Income">Income</option>
            </select>
            <label>Amount:</label>
            <input type="number" id="amount" step="0.01" placeholder="0.00">
            <div class="error" id="amountError">Amount must be greater than 0.</div>
            <label>Description:</label>
            <input type="text" id="description" placeholder="e.g., Groceries, Lunch, etc.">
            <div class="error" id="descriptionError">Description is required.</div>
            <label>Category:</label>
            <select id="category">
                <option value="Food">Food</option>
                <option value="Entertainment">Entertainment</option>
                <option value="Utilities">Utilities</option>
                <option value="Gifts">Gifts</option>
                <option value="Other">Other</option>
            </select>
            <label>Transaction Date:</label>
            <input type="date" id="transactionDate" value="2025-10-18">
            <button onclick="saveTransaction()">Save Changes</button>
        </div>
        <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
        <script>
            // Load data from localStorage on page load
            let transactions = JSON.parse(localStorage.getItem('transactions')) || [];
            let monthlyData = JSON.parse(localStorage.getItem('monthlyData')) || {
                labels: ['Sep 2025', 'Aug 2025', 'Jul 2025', 'Jun 2025', 'May 2025'], // Default labels
                income: [0, 0, 0, 0, 0], // Default income data
                expenses: [0, 0, 0, 0, 0] // Default expenses data
            };

            // Initial donut chart setup with icons
            const ctxDonut = document.getElementById('donutChart').getContext('2d');
            let donutChart = new Chart(ctxDonut, {
                type: 'doughnut',
                data: {
                    labels: [],
                    datasets: [{
                        data: [],
                        backgroundColor: [],
                        borderWidth: 2,
                        borderColor: '#fff'
                    }]
                },
                options: {
                    responsive: true,
                    animation: {
                        animateRotate: true,
                        animateScale: true,
                        duration: 1500
                    },
                    plugins: {
                        legend: {
                            labels: {
                                generateLabels: function(chart) {
                                    const data = chart.data;
                                    if (data.labels.length && data.datasets.length) {
                                        return data.labels.map((label, i) => {
                                            const icon = getCategoryIcon(label);
                                            return {
                                                text: `${icon} ${label}`,
                                                fillStyle: data.datasets[0].backgroundColor[i],
                                                strokeStyle: '#fff',
                                                lineWidth: 2,
                                                hidden: isNaN(data.datasets[0].data[i]) || data.datasets[0].data[i] === null,
                                                index: i
                                            };
                                        });
                                    }
                                    return [];
                                },
                                color: '#fff'
                            }
                        }
                    }
                }
            });

            // 5-month trend chart setup
            const ctxTrend = document.getElementById('trendChart').getContext('2d');
            let trendChart = new Chart(ctxTrend, {
                type: 'line',
                data: {
                    labels: monthlyData.labels,
                    datasets: [{
                        label: 'Total Income',
                        data: monthlyData.income,
                        borderColor: '#ff6384',
                        backgroundColor: 'rgba(255, 99, 132, 0.2)',
                        fill: true,
                        tension: 0.4
                    }, {
                        label: 'Total Expenses',
                        data: monthlyData.expenses,
                        borderColor: '#36a2eb',
                        backgroundColor: 'rgba(54, 162, 235, 0.2)',
                        fill: true,
                        tension: 0.4
                    }]
                },
                options: {
                    responsive: true,
                    animation: {
                        duration: 2000,
                        easing: 'easeInOutQuad'
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            title: {
                                display: true,
                                text: 'Amount ($)',
                                color: '#fff'
                            },
                            ticks: {
                                color: '#fff'
                            }
                        },
                        x: {
                            title: {
                                display: true,
                                text: 'Month',
                                color: '#fff'
                            },
                            ticks: {
                                color: '#fff'
                            }
                        }
                    },
                    plugins: {
                        legend: {
                            labels: {
                                color: '#fff'
                            }
                        }
                    }
                }
            });

            // Load transactions into table with empty state handling
            function loadTransactions() {
                const table = document.getElementById('transactionTable');
                table.innerHTML = `
                    <tr>
                        <th>Description</th>
                        <th>Category</th>
                        <th>Amount</th>
                    </tr>
                `;
                if (transactions.length === 0) {
                    const row = table.insertRow(-1);
                    row.insertCell(0).colSpan = 3;
                    row.insertCell(0).textContent = 'No transactions available.';
                    row.insertCell(0).style.textAlign = 'center';
                    row.insertCell(0).style.color = '#666';
                } else {
                    transactions.slice(-5).reverse().forEach(trans => {
                        const row = table.insertRow(-1);
                        row.insertCell(0).textContent = trans.description;
                        row.insertCell(1).textContent = trans.category;
                        row.insertCell(2).textContent = `$${trans.amount.toFixed(2)}`;
                    });
                }
                updateDonutChart();
            }

            // Update donut chart based on transactions
            function updateDonutChart() {
                const categoryMap = {};
                transactions.forEach(trans => {
                    if (trans.type === 'Expense') {
                        categoryMap[trans.category] = (categoryMap[trans.category] || 0) + trans.amount;
                    }
                });
                donutChart.data.labels = Object.keys(categoryMap);
                donutChart.data.datasets[0].data = Object.values(categoryMap);
                donutChart.data.datasets[0].backgroundColor = donutChart.data.labels.map(() => getRandomColor());
                donutChart.update();
                updateFinancialIndicators();
            }

            // Update financial indicators
            function updateFinancialIndicators() {
                const totalExpenses = transactions
                    .filter(trans => trans.type === 'Expense')
                    .reduce((sum, trans) => sum + trans.amount, 0);
                const totalIncome = transactions
                    .filter(trans => trans.type === 'Income')
                    .reduce((sum, trans) => sum + trans.amount, 0) || monthlyData.income[monthlyData.income.length - 1] || 0;
                const savings = totalIncome - totalExpenses;

                document.getElementById('totalIncome').textContent = `$${totalIncome.toFixed(2)}`;
                document.getElementById('totalExpenses').textContent = `$${totalExpenses.toFixed(2)}`;
                document.getElementById('savings').textContent = `$${savings.toFixed(2)}`;
            }

            // Open popup
            function openPopup() {
                document.getElementById('popup').style.display = 'block';
                document.getElementById('overlay').style.display = 'block';
                // Set default date to today (12:24 PM IST, October 18, 2025)
                const today = new Date('2025-10-18T12:24:00+05:30').toISOString().split('T')[0];
                document.getElementById('transactionDate').value = today;
                // Clear any previous error messages
                document.getElementById('amountError').style.display = 'none';
                document.getElementById('descriptionError').style.display = 'none';
            }

            // Close popup
            function closePopup() {
                document.getElementById('popup').style.display = 'none';
                document.getElementById('overlay').style.display = 'none';
            }

            // Save transaction with validation
            function saveTransaction() {
                const type = document.getElementById('transactionType').value;
                const amount = parseFloat(document.getElementById('amount').value) || 0;
                const description = document.getElementById('description').value.trim();
                const category = document.getElementById('category').value;
                const date = document.getElementById('transactionDate').value || new Date().toISOString().split('T')[0];

                // Validation
                let isValid = true;
                if (amount <= 0) {
                    document.getElementById('amountError').style.display = 'block';
                    isValid = false;
                }
                if (!description) {
                    document.getElementById('descriptionError').style.display = 'block';
                    isValid = false;
                }

                if (isValid) {
                    const transaction = { type, amount, description, category, date };
                    transactions.push(transaction);
                    localStorage.setItem('transactions', JSON.stringify(transactions));
                    loadTransactions();
                    closePopup();
                    // Clear form except date
                    document.getElementById('amount').value = '';
                    document.getElementById('description').value = '';
                }
            }

            // Add monthly data
            function addMonthlyData() {
                const month = prompt("Enter month (e.g., 'Oct 2025')");
                const income = parseFloat(prompt("Enter total income for " + month + " ($)") || 0);
                const expenses = parseFloat(prompt("Enter total expenses for " + month + " ($)") || 0);

                if (month && !isNaN(income) && !isNaN(expenses)) {
                    // Ensure arrays are limited to 5 months, removing oldest if necessary
                    if (monthlyData.labels.length >= 5) {
                        monthlyData.labels.shift();
                        monthlyData.income.shift();
                        monthlyData.expenses.shift();
                    }
                    monthlyData.labels.push(month);
                    monthlyData.income.push(income);
                    monthlyData.expenses.push(expenses);
                    localStorage.setItem('monthlyData', JSON.stringify(monthlyData));
                    trendChart.data.labels = monthlyData.labels;
                    trendChart.data.datasets[0].data = monthlyData.income;
                    trendChart.data.datasets[1].data = monthlyData.expenses;
                    trendChart.update();
                    updateFinancialIndicators();
                }
            }

            // Helper function to get a random color
            function getRandomColor() {
                const letters = '0123456789ABCDEF';
                let color = '#';
                for (let i = 0; i < 6; i++) {
                    color += letters[Math.floor(Math.random() * 16)];
                }
                return color;
            }

            // Helper function to get category icon
            function getCategoryIcon(category) {
                const icons = {
                    'Food': 'ðŸ½ï¸',
                    'Entertainment': 'ðŸŽ¬',
                    'Utilities': 'ðŸ’¡',
                    'Gifts': 'ðŸŽ',
                    'Other': 'ðŸ”§'
                };
                return icons[category] || 'ðŸ”§'; // Default to 'ðŸ”§' for unknown categories
            }

            // Initial load
            loadTransactions();
            trendChart.update(); // Ensure trend chart initializes with default data
                
            // Mobile sidebar toggle
            function toggleSidebar() {
                const sidebar = document.getElementById('sidebar');
                sidebar.classList.toggle('active');
            }
                
            // Close sidebar when clicking outside on mobile
            document.addEventListener('click', function(event) {
                const sidebar = document.getElementById('sidebar');
                const menuToggle = document.querySelector('.menu-toggle');
                if (window.innerWidth <= 768 && 
                    !sidebar.contains(event.target) && 
                    !menuToggle.contains(event.target) && 
                    sidebar.classList.contains('active')) {
                    sidebar.classList.remove('active');
                }
            });
        </script>
    </body>
    </html>