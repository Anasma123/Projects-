<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FinTrack Transactions</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 0;
            padding: 20px;
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
            color: #333;
            overflow-x: hidden;
        }
        .sidebar {
            width: 200px;
            background: linear-gradient(145deg, #34495e 0%, #2c3e50 100%);
            padding: 20px;
            position: fixed;
            height: 100%;
            border-radius: 15px;
            box-shadow: 0 6px 12px rgba(0,0,0,0.3);
            transition: transform 0.4s ease;
        }
        .sidebar ul {
            list-style: none;
            padding: 0;
            display: flex;
            flex-direction: column;
            gap: 10px;
        }
        .sidebar ul li {
            color: #ecf0f1;
            cursor: pointer;
            font-size: 1.1em;
            padding: 10px;
            border-radius: 5px;
            transition: all 0.3s ease;
            text-align: center;
        }
        .sidebar ul li button {
            background: linear-gradient(135deg, #4CAF50, #2E8B57);
            border: none;
            color: white;
            padding: 10px 20px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 16px;
            width: 100%;
            transition: 0.3s;
        }
        .sidebar ul li button:hover {
            background: linear-gradient(135deg, #45a049, #3e8e41);
        }
        .sidebar ul li a {
            text-decoration: none;
        }
        .content {
            margin-left: 240px;
            animation: fadeIn 1.2s ease-in-out;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .dashboard-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            background: linear-gradient(90deg, #3498db 0%, #8e44ad 100%);
            padding: 20px;
            border-radius: 15px;
            box-shadow: 0 6px 15px rgba(0,0,0,0.2);
            margin-bottom: 20px;
            animation: pulse 2s infinite;
        }
        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.02); }
            100% { transform: scale(1); }
        }
        .dashboard-header h2 {
            font-size: 2em;
            color: #fff;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }
        .transaction-list {
            background: #fff;
            padding: 20px;
            border-radius: 15px;
            box-shadow: 0 6px 12px rgba(0,0,0,0.1);
            margin-bottom: 20px;
        }
        .transaction-table {
            width: 100%;
            border-collapse: collapse;
        }
        .transaction-table th, .transaction-table td {
            padding: 12px;
            text-align: left;
            border-bottom: 1px solid #ddd;
            transition: background 0.3s ease;
        }
        .transaction-table th {
            background: linear-gradient(90deg, #3498db 0%, #8e44ad 100%);
            color: #fff;
            font-size: 1.2em;
            text-transform: uppercase;
        }
        .transaction-table td.amount {
            color: #e74c3c;
        }
        .transaction-table td.amount.income {
            color: #27ae60;
        }
        .transaction-table tr:hover td {
            background: #f0f0f0;
            color: #2c3e50;
        }
        .transaction-table .actions button {
            background: none;
            border: none;
            cursor: pointer;
            font-size: 1em;
            margin-right: 10px;
            color: #3498db;
        }
        .transaction-table .actions button:hover {
            color: #2ecc71;
        }
        .new-transaction {
            background: linear-gradient(90deg, #27ae60 0%, #2ecc71 100%);
            color: white;
            padding: 12px 25px;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            font-size: 1.1em;
            transition: all 0.4s ease;
            box-shadow: 0 4px 8px rgba(0,0,0,0.2);
        }
        .new-transaction:hover {
            background: linear-gradient(90deg, #219653 0%, #27ae60 100%);
            transform: translateY(-3px);
            box-shadow: 0 6px 12px rgba(33,150,83,0.4);
        }
        .popup {
            display: none;
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: #fff;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 6px 12px rgba(0,0,0,0.3);
            z-index: 1000;
            width: 300px;
            color: #333;
        }
        .popup h3 {
            font-size: 1.2em;
            margin-bottom: 15px;
        }
        .popup label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
        }
        .popup input, .popup select {
            width: 100%;
            padding: 8px;
            margin-bottom: 10px;
            border: 1px solid #ddd;
            border-radius: 5px;
        }
        .popup button {
            background: #27ae60;
            color: #fff;
            padding: 10px 20px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            transition: background 0.3s ease;
        }
        .popup button:hover {
            background: #219653;
        }
        .overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.5);
            z-index: 999;
        }
    </style>
</head>
<body>
    <div class="sidebar">
        <ul>
            <li><button onclick="window.location.href='daash.html'">Dashboard</button></li>
            <li><button onclick="window.location.href='budgets.html'">Budgets</button></li>
            <li><button>Transactions</button></li>
            <li><button onclick="window.location.href='reports.html'">Reports</button></li>
        </ul>
    </div>
    <div class="content">
        <div class="dashboard-header">
            <h2>Transactions</h2>
            <button class="new-transaction" onclick="openPopup()">New Transaction</button>
        </div>
        <div class="transaction-list">
            <table class="transaction-table" id="transactionTable">
                <tr>
                    <th>Date</th>
                    <th>Description</th>
                    <th>Category</th>
                    <th>Amount</th>
                    <th>Actions</th>
                </tr>
            </table>
        </div>
    </div>
    <div class="overlay" id="overlay" onclick="closePopup()"></div>
    <div class="popup" id="popup">
        <h3>Add Transaction</h3>
        <label>Transaction Type:</label>
        <select id="transactionType">
            <option value="Expense">Expense</option>
            <option value="Income">Income</option>
        </select>
        <label>Amount:</label>
        <input type="number" id="amount" step="0.01" placeholder="0.00">
        <label>Description:</label>
        <input type="text" id="description" placeholder="e.g., Groceries, Salary, etc.">
        <label>Category:</label>
        <select id="category">
            <option value="Food">Food</option>
            <option value="Transport">Transport</option>
            <option value="Housing">Housing</option>
            <option value="Utilities">Utilities</option>
            <option value="Entertainment">Entertainment</option>
            <option value="Health">Health</option>
            <option value="Shopping">Shopping</option>
            <option value="Gifts">Gifts</option>
            <option value="Other">Other</option>
        </select>
        <label>Transaction Date:</label>
        <input type="date" id="transactionDate" value="2025-10-18">
        <button onclick="saveTransaction()">Save Changes</button>
    </div>
    <script>
        // Load data from localStorage on page load
        let transactions = JSON.parse(localStorage.getItem('transactions')) || [];

        // Load and display all transactions
        function loadTransactions() {
            const table = document.getElementById('transactionTable');
            table.innerHTML = `
                <tr>
                    <th>Date</th>
                    <th>Description</th>
                    <th>Category</th>
                    <th>Amount</th>
                    <th>Actions</th>
                </tr>
            `;
            transactions.forEach((trans, index) => {
                const row = table.insertRow(-1);
                row.insertCell(0).textContent = trans.date;
                row.insertCell(1).textContent = trans.description;
                row.insertCell(2).textContent = trans.category;
                const amountCell = row.insertCell(3);
                amountCell.textContent = `${trans.type === 'Expense' ? '-' : '+'}$${trans.amount.toFixed(2)}`;
                amountCell.className = `amount ${trans.type === 'Income' ? 'income' : ''}`;
                const actionsCell = row.insertCell(4);
                actionsCell.className = 'actions';
                actionsCell.innerHTML = `
                    <button onclick="editTransaction(${index})">‚úèÔ∏è</button>
                    <button onclick="deleteTransaction(${index})">üóëÔ∏è</button>
                `;
            });
        }

        // Open popup
        function openPopup() {
            document.getElementById('popup').style.display = 'block';
            document.getElementById('overlay').style.display = 'block';
            document.getElementById('transactionType').value = 'Expense';
            document.getElementById('amount').value = '';
            document.getElementById('description').value = '';
            document.getElementById('category').value = 'Food';
            const today = new Date('2025-10-18T11:47:00+05:30').toISOString().split('T')[0];
            document.getElementById('transactionDate').value = today;
        }

        // Close popup
        function closePopup() {
            document.getElementById('popup').style.display = 'none';
            document.getElementById('overlay').style.display = 'none';
        }

        // Save or update transaction
        function saveTransaction(index = -1) {
            const type = document.getElementById('transactionType').value;
            const amount = parseFloat(document.getElementById('amount').value) || 0;
            const description = document.getElementById('description').value || 'No Description';
            const category = document.getElementById('category').value;
            const date = document.getElementById('transactionDate').value || new Date().toISOString().split('T')[0];

            if (amount > 0) {
                const transaction = { type, amount, description, category, date };
                if (index >= 0) {
                    transactions[index] = transaction;
                } else {
                    transactions.push(transaction);
                }
                localStorage.setItem('transactions', JSON.stringify(transactions));
                loadTransactions();
                closePopup();
            }
        }

        // Edit transaction
        function editTransaction(index) {
            const trans = transactions[index];
            document.getElementById('transactionType').value = trans.type;
            document.getElementById('amount').value = trans.amount;
            document.getElementById('description').value = trans.description;
            document.getElementById('category').value = trans.category;
            document.getElementById('transactionDate').value = trans.date;
            document.getElementById('popup').style.display = 'block';
            document.getElementById('overlay').style.display = 'block';
            window.currentIndex = index; // Store index for update
            document.querySelector('#popup button').onclick = () => saveTransaction(index);
        }

        // Delete transaction
        function deleteTransaction(index) {
            if (confirm('Are you sure you want to delete this transaction?')) {
                transactions.splice(index, 1);
                localStorage.setItem('transactions', JSON.stringify(transactions));
                loadTransactions();
            }
        }

        // Initial load
        loadTransactions();
    </script>
</body>
</html>